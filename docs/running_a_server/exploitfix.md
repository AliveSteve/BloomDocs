---
id: exploitfix
title: Exploit Fix
slug: /exploitfix
hide_title: true
hide_table_of_contents: true
sidebar_label: ❗ Exploit Fix ❗
image: https://bloom.host/assets/images/logo.png
---

<div class="text--center">
<img src="https://bloom.host/logo-white.svg" alt="logo" height="50%" width="50%"/>
<h1>SECURITY VULNERABILITY IN JAVA EDITION</h1>
</div>

### Introduction

On December 9, 2021 an exploit was found on one of the logging libraries being used by Minecraft server jars.

A fix for the exploit for Paper was released by the PaperMC team and subsequently was merged by the different forks of Paper. Other server jars have also released builds implementing a fix. 

On December 10, 2021 Mojang [released a fix](https://www.minecraft.net/en-us/article/important-message--security-vulnerability-java-edition) for the exploit on Minecraft clients and steps on how to fix it on older versions of Minecraft servers. Follow the steps outlined below to fix the exploit.

Clients also were vulnerable to this exploit, but Mojang has already released a patch that applies to all Minecraft versions - You just need to close all running instances of the game and the Minecraft launcher and start the lancher again - The patched version will download automatically.

We have created this document to guide you through the steps to fix the exploit. We recoommend you apply the flag if needed for your Minecraft version and update your server jar to the latest build available, steps on how to do both things are listed below.

If you need help doing any of this please refer to our #support-chat channel.

### If your server is running:

**1.18 server jar**: Upgrade to 1.18.1, if possible. If not, use the same approach as for 1.17.x:

**1.17-1.17.1 server jar**: Mojang has recommended you add the `-Dlog4j2.formatMsgNoLookups=true` flag to your startup command. On December 9, 2021 the Bloom.host team added this flag to all Minecraft servers, so you just have to make sure you have this flag in your startup command. To verify, just go to Minecraft panel, then go to the startup tab and make sure the flag is on the startup command, it should be before the `-jar` text. It's also recommended you update to the latest build of 1.17.1 provided by your server jar. Paper, Fabric and other server jars have released builds of 1.17.1 including the exploit fix. Refer to the updating section at the end of this document for more information.

**1.12-1.16.5** server jars: Download [this file](https://launcher.mojang.com/v1/objects/02937d122c86ce73319ef9975b58896fc1b491d1/log4j2_112-116.xml) to the home directory where your server runs. To do this you can go to the URL and it will open a .xml file on your browser, you will have to right click then click on 'Save as' then save the .xml file. You can also head over to the File Manager on our Minecraft panel, click on the **Download from URL** button and paste the following URL: `https://launcher.mojang.com/v1/objects/02937d122c86ce73319ef9975b58896fc1b491d1/log4j2_112-116.xml` and this will download the file to the home directory of your server. After the file is on the server, go to the startup tab on the Minecraft panel add the following JVM arguments to your startup flags. To do this just go to the startup tab and add the following JVM arguments in the startup flags box: `-Dlog4j.configurationFile=log4j2_112-116.xml`. After you have added the JVM arguments, restart your server. It's also recommended you update to the latest build provided by your server jar. Most developers have expressed their intention to not updating their 1.12-1.16.5 server jars to include the exploit fix, but Paper has already issued a new build of 1.16.5 that includes the bug fix. Refer to the updating section at the end of this document for more information. 

**1.7-1.11.2** server jars: Download [this file](https://launcher.mojang.com/v1/objects/dd2b723346a8dcd48e7f4d245f6bf09e98db9696/log4j2_17-111.xml) to the home directory where your server runs. To do this you can go to the URL and it will open a .xml file on your browser, you will have to right click then click on 'Save as' then save the .xml file. You can also head over to the File Manager on our Minecraft panel, click on the **Download from URL** button and paste the following URL: `https://launcher.mojang.com/v1/objects/dd2b723346a8dcd48e7f4d245f6bf09e98db9696/log4j2_17-111.xml` and this will download the file to the home directory of your server. After the file is on the server, go to the startup tab on the Minecraft panel add the following JVM arguments to your startup flags. To do this just go to the startup tab and add the following JVM arguments in the startup flags box: `-Dlog4j.configurationFile=log4j2_17-111.xml`. After you have added the JVM arguments, restart your server.

**Servers running versions 1.6 and below are not affected by this exploit**

<div class="text--center"><img src={require('../../static/imgs/running_a_server/exploitfix/1.png').default} alt="img"/></div>

## Updating your server jar to the latest build

:white_check_mark: Spigot - See [here](https://www.spigotmc.org/threads/security-releases-%E2%80%94-1-8-8%E2%80%931-18.537204/)!

:white_check_mark: Paper - Download [here](https://papermc.io/downloads) - The exploit fix is in **Build #64** and newer for **MC 1.18** / **Build #398** and newer for **MC 1.17.1**. Paper has also backported the fix to **MC 1.16.5** on build #792 which can be found [here](https://papermc.io/legacy)

:white_check_mark: Purpur - Download [here](https://purpurmc.org/downloads?v=1.18) - The exploit fix is in **Build #1432** and newer for **MC 1.18**.

:white_check_mark: Waterfall - Download [here](https://papermc.io/downloads#Waterfall) - The exploit fix is in **Build #467** and newer.

:white_check_mark: Velocity - Download [here](https://papermc.io/downloads#Velocity) - The exploit fix is in **Build 97** and newer.

You should be able to download one of the jars above (make sure you download a build with the fix) and upload it to your server jar.

**You can also update your server using our Server Type selector.** Just go to the settings page on your server, then select the jar you want to download and select the latest build. Make sure you reference the build # listed above so you know you are downloading a build that includes the fix. You may also make use of an **Update to the latest build** button if you have used our Server Type selector in the past.

**It's recommended you run a server backup before updating or doing any changes**. Check our guide on [How backups works and how to use them](https://docs.bloom.host/backups).

If you need help updating your server please refer to our [Updating](https://docs.bloom.host/1.18) guide and #support-chat channel.